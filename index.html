<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>八方雲集訂單系統</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: "Microsoft JhengHei", sans-serif; margin: 0; padding: 1em; background: #f0f0f0; }
    .section { background: #fff; padding: 1em; border-radius: 6px; box-shadow: 0 0 8px rgba(0,0,0,0.1); margin-bottom: 20px; max-width: 700px; margin: auto; }
    h2 { text-align: center; color: #b30000; }
    label, select, input { font-size: 16px; margin: 0.3em 0; }
    table { width: 100%; border-collapse: collapse; margin-top: 1em; background: #fff; }
    th, td { border: 1px solid #ccc; padding: 6px; text-align: center; }
    th { background: #eee; }
    .footer { text-align: center; font-size: 18px; margin-top: 40px; line-height: 1.6; display: none; }
    .action-btn { margin-top: 1em; }
    @media print {
      .section input, .section select, .section button, .section label { display: none !important; }
      .footer { display: block; }
    }
  </style>
</head>
<body>
  <div class="section">
    <h2>八方雲集點餐系統</h2>
    <label>選擇品項：
      <select id="itemSelect">
        <option value="">請選擇</option>
      </select>
    </label>
    <br>
    <label>數量（份/顆）：
      <input type="number" id="itemQty" min="1" value="1" />
    </label>
    <br>
    <button onclick="addItem()">加入訂單</button>
    <button onclick="clearOrders()" class="action-btn">清除所有訂單</button>
    <div id="orderTable"></div>
  </div>

  <div class="footer">
    <div>大瑞科技</div>
    <div>地址: 高雄市大寮區鳳林二路532號</div>
    <div>電話: (07)7871875</div>
  </div>

  <script>
    const menu = {
      "招牌鍋貼(1粒)": 7, "韭菜鍋貼(1粒)": 7, "韓式辣味鍋貼(1粒)": 7,
      "咖哩雞肉鍋貼(1粒)": 7, "玉米鍋貼(1粒)": 7, "新疏食鍋貼(1粒)": 7.5,
      "招牌水餃(1粒)": 7, "韭菜水餃(1粒)": 7, "韓式辣味水餃(1粒)": 7,
      "咖哩雞肉水餃(1粒)": 7, "玉米水餃(1粒)": 7, "新疏食水餃(1粒)": 7.5,
      "鮮蝦水餃(1粒)": 10.5
    };

    const orders = {};

    window.onload = () => {
      const sel = document.getElementById("itemSelect");
      for (let item in menu) {
        sel.innerHTML += `<option value="${item}">${item}（$${menu[item]}）</option>`;
      }
      renderTable();
    };

    function addItem() {
      const item = document.getElementById("itemSelect").value;
      const qty = parseInt(document.getElementById("itemQty").value);
      if (!item || qty <= 0) return;

      if (!orders[item]) orders[item] = [];
      orders[item].push(qty);
      renderTable();
    }

    function deleteItem(item, index) {
      orders[item].splice(index, 1);
      if (orders[item].length === 0) delete orders[item];
      renderTable();
    }

    function clearOrders() {
      if (confirm("確定要清除所有訂單嗎？")) {
        for (let key in orders) delete orders[key];
        renderTable();
      }
    }

    function renderTable() {
      let html = "<table><tr><th>品項</th><th>明細</th><th>單價</th><th>小計</th><th>操作</th></tr>";
      let total = 0;

      for (let item in orders) {
        const unitPrice = menu[item];
        const rows = orders[item].map((qty, idx) => {
          const subtotal = qty * unitPrice;
          total += subtotal;
          return `<div>${qty} 顆 - $${subtotal} <button onclick="deleteItem('${item}', ${idx})">🗑️</button></div>`;
        }).join("");
        const itemTotal = orders[item].reduce((sum, q) => sum + q * unitPrice, 0);
        html += `<tr>
          <td>${item}</td>
          <td>${rows}</td>
          <td>$${unitPrice}</td>
          <td>$${itemTotal}</td>
          <td></td>
        </tr>`;
      }

      html += `<tr><td colspan="4">總金額</td><td>$${total}</td></tr></table>`;
      html += `<button onclick="window.print()">列印統計表</button>`;
      document.getElementById("orderTable").innerHTML = html;
    }
  </script>
</body>
</html>
